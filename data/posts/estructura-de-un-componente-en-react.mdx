---
title: "Estructura y funcionamiento de un componente en React"
date: "2016-09-28"
tags:
  - " Desarrollo"
---

Un componente de **React** se puede crear de varias formas. Una de ellas es con el m茅todo `createClass` que ofrece la librer铆a.

```javascript
const React = require('react')

const MyComponent = React.createClass({
...
})
```

Y la otra es utilizando las clases que ofrece ECMAScript 6 (ES2015). En este caso heredan de la clase `Component` de React y necesitan llamar al constructor padre en el m茅todo `constructor` Si usamos Webpack con Babel podemos tambi茅n usar el sistema de m贸dulos de ES2015:

```javascript
import React form 'react'

class MyComponent extends React.Component {
  constructor () {
    super()
  }
  ...
}
```

A lo largo de los art铆culos y tutoriales que escriba, siempre usar茅 la notaci贸n de clases, que me parece mucho m谩s clara y adem谩s sigue el est谩ndar de ES2015.

### Render

Todo componente de React, tiene un m茅todo `Render` que es el que se encarga de renderizar en el navegador el HTML correspondiente al componente.

Este m茅todo se llama autom谩ticamente cuando se crea un componente y cuando el estado del componente se actualiza (veremos esto m谩s adelante).

En este m茅todo es donde usamos JSX para facilitar el desarrollo y creaci贸n de elementos HTML. Veamos un ejemplo:

```javascript
import React from "react";

class MyComponent extends React.Component {
  constructor() {
    super();
  }

  render() {
    return (
      <div>
        <span>Hola!, soy un componente</span>
      </div>
    );
  }
}
```

### Propiedades

Un componente en React puede recibir propiedades como par谩metros desde un componente padre para poder insertar valores y eventos en su HTML.

Imagina que tienes un componente que representa un men煤 con varias opciones, y 茅stas opciones las pasamos por par谩metros como una propiedad llamada `options`:

Veamos esto en c贸digo:

```javascript
import React from "react";

class App extends React.Component {
  constructor() {
    super();
  }

  render() {
    let menuOptions = ["Opci贸n 1", "Opci贸n 2", "Opci贸n 3"];
    return <Menu options={menuOptions} />;
  }
}
```

驴C贸mo accedemos a estas propiedades en el componente hijo a la hora de renderizarlo? Por medio de las `props`. Veamos como con el c贸digo del componente `<Menu />`:

```javascript
import React from "react";

class Menu extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    let options = this.props.options;
    return (
      <ul>
        {options.map((option) => (
          <li>{option}</li>
        ))}
      </ul>
    );
  }
}
```

En el m茅todo `render` creamos una variable `options` con el valor que tenga `this.props.options`. ste _options_ dentro de _props_ es el mismo atributo _options_ que tiene el componente `<Menu />`y es a trav茅s de `props` como le pasamos el valor desde el _padre_ al componente _hijo_.

El c贸digo final de este ejemplo ser铆a:

```javascript
import React from 'react'
import ReactDOM from 'react-dom'

class App extends React.Component {
  constructor(props) {
    super(props)
  }

  render() {
    let menuOptions = ['Opci贸n 1', 'Opci贸n 2', 'Opci贸n 3']
    return <Menu options={menuOptions} />
  }
}

class Menu extends React.Component {
  constructor(props) {
    super(props)
  }

  render() {
    let options = this.props.options
    return (
      <ul>
        {options.map(option => <li>{option}</li>)}
      </ul>
    )
  }
}

ReactDOM.render(<App />, document.getElementById('app')
```

Y esto muestra en el navegador algo como lo siguiente:

- Opci贸n 1
- Opci贸n 2
- Opci贸n 3

Puedes ver el c贸digo en el siguiente JSBin: [C贸digo](http://jsbin.com/xegicihalo/edit?html,js,output)

### Estado

Adem谩s de las `props`, los componentes en React pueden tener estado. Lo caracter铆stico del estado es que si 茅ste cambia, el componente se renderiza autom谩ticamente. Veamos un ejemplo de esto.

Si tomamos el c贸digo anterior y en el componente `<App />`guardamos en su estado las opciones de menu, el c贸digo de _App_ ser铆a as铆:

```javascript
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      menuOptions: ["Opci贸n 1", "Opci贸n 2", "Opci贸n 3"],
    };
  }

  render() {
    return <Menu options={this.state.menuOptions} />;
  }
}
```

De 茅sta manera, las "opciones" pertenecen al estado de la aplicaci贸n (App) y se pueden pasar a componentes hijos (Menu) a trav茅s de las _props_.

Ahora, si queremos cambiar el estado, a帽adiendo una nueva opci贸n al men煤 tenemos a nuestra disposici贸n la funci贸n `setState`, que nos permite modificarlo.

Aprovechando esto, vamos a modificar el estado a trav茅s de un evento disparado desde el componente hijo hacia el padre

### Eventos

Si las propiedades pasan de padres a hijos, es decir hacia abajo, los eventos se disparan hacia arriba, es decir de hijos a padres. Un evento que dispare un componente, puede ser recogido por el padre.

Ve谩moslo con un ejemplo. El componente `<Menu />` va a tener una nueva propiedad llamada `onAddOption`:

```javascript
render() {
    return (
      <Menu
        options={this.state.menuOptions}
        onAddOption={this.handleAddOption.bind(this)}
      />
  )
  }
```

Esta propiedad va a llamar a la funci贸n `handleAddOption` en `<App />` para poder modificar el estado:

```javascript
handleAddOption () {
    this.setState({
      menuOptions: this.state.menuOptions.concat(['Nueva Opci贸n'])
    })
  }
```

Cada vez que se llame a la funci贸n, a帽adir谩 al estado el item `Nueva Opci贸n`. C贸mo dijimos al inicio, cada vez que se modifique el estado, se _"re-renderizar谩"_ el componente y veremos en el navegador la nueva opci贸n a帽adida.

Para poder llamar a esa funci贸n, necesitamos disparar un evento desde el hijo. Voy a a帽adir un elemento `<button>` y utilizar el evento `onClick` de JSX, que simula al listener de click del rat贸n y ahi llamar茅 a la funci贸n "propiedad" `onAddOption` del padre.

El c贸digo de completo es:

```javascript
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      menuOptions: ["Opci贸n 1", "Opci贸n 2", "Opci贸n 3"],
    };
  }

  render() {
    return (
      <Menu
        options={this.state.menuOptions}
        onAddOption={this.handleAddOption.bind(this)}
      />
    );
  }

  handleAddOption() {
    this.setState({
      menuOptions: this.state.menuOptions.concat(["Nueva Opci贸n"]),
    });
  }
}

class Menu extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    let options = this.props.options;
    return (
      <div>
        <ul>
          {options.map((option) => (
            <li>{option}</li>
          ))}
        </ul>
        <button onClick={this.props.onAddOption}>Nueva Opci贸n</button>
      </div>
    );
  }
}

ReactDOM.render(<App />, document.getElementById("app"));
```

Cada vez que hagamos click en el bot贸n, llamar谩 a la funci贸n que le llega por _props_. sta funci贸n, llama en el componente padre (App) a la funci贸n `handleAddOption` y la _bindeamos_ con `this`, para que pueda llamar a `this.setState` dentro de la funci贸n. ste `setState` modifica el estado y llama internamente a la funci贸n `render` lo que provoca que se vuelva a "pintar" todo de nuevo.

Y as铆 es como funciona b谩sicamente un componente de React. M谩s adelante veremos cuales son lo m茅todos de ciclo de vida y c贸mo utilizarlos.

Tienes el c贸digo de 茅ste otro ejemplo a tu disposici贸n en el siguiente JSBin: [C贸digo](http://jsbin.com/kagejehusa/edit?js,console,output)

驴Quieres aprender m谩s sobre React? Te lo ense帽o en mi [**curso online** sobre fundamentos de **React.js**](http://cursos.carlosazaustre.es/p/react-js/)
