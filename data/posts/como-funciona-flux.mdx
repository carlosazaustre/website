---
title: "쯈u칠 es Flux? Entendiendo su arquitectura"
date: "2018-05-25"
tags:
  - "游눹 Desarrollo"
---

Como suele pasar en el desarrollo Front-End de los 칰ltimos a침os, [existe un gran n칰mero de librer칤as, frameworks](/frameworks-de-javascript/) y herramientas que si uno no est치 m치s o menos pendiente y al d칤a, resulte abrumador.

El motivo de este post es explicar qu칠 es exactamente Flux y c칩mo funciona.

## Arquitectura Flux

![Flux](/images/como-funciona-flux/flux-logo.png)

[Flux](https://facebook.github.io/flux/docs/in-depth-overview.html#content) es una arquitectura para el manejo y el flujo de los datos en una aplicaci칩n web, particularmente en el Front-End. Fue ideada por Facebook y vendr칤a a sustituir el patr칩n MVC (o MVVM).

El patr칩n MVC para el Front-End empez칩 a ser necesario cuando las aplicaciones web empezaron a hacerse m치s grandes y con librer칤as como jQuery o el propio _Vanilla JavaScript_ se hac칤an dif칤ciles de manejar. Por eso nacieron frameworks como Backbone, Ember y/o Angular.

Todos ellos siguen una arquitectura Modelo-Vista-Controlador, o algo parecido (MVVM, MV\*). Haciendo m치s sencillo el manejo de datos en aplicaciones web con cierto grado de complejidad.

![Modelo Vista Controlador](/images/como-funciona-flux/mvc.png)

Flux naci칩 desde Facebook por un problema que se les presentaba al tener una comunicaci칩n bidireccional entre los modelos y los controladores, haci칠ndoles muy dif칤cil poder depurar y rastrear errores.

Flux propone una arquitectura en la que el **flujo de datos es unidireccional**. Los datos viajan desde la vista por medio de acciones y llegan a un _Store_ desde el cual se actualizar치 la vista de nuevo.

![Data flow en Flux](/images/como-funciona-flux/1-rictDFcDHCvOacMUaWxZEQ.png)

Teniendo un 칰nico camino, y un sitio donde se almacena el _estado_ de la aplicaci칩n, es m치s sencillo depurar errores y saber que est치 pasando en cada momento.

Como digo, Flux es un patr칩n de dise침o o forma de "arquitecturar" una aplicaci칩n web, en concreto la forma en la que se manejan los datos o estado de la aplicaci칩n (datos de un usuario, datos recogidos a partir de un API REST o _webservice_, etc...) No se trata de una librer칤a ni framework.

Al igual que un patr칩n MVC est치 formado por un Modelo, una Vista y un Controlador, en Flux tenemos distintos actores:

### Vista

La vista ser칤an los **componentes web**, ya sean [construidos nativamente](/como-crear-webcomponent-de-forma-nativa/), con Polymer, con [Angular](/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/), React, etc...

### Store

La _Store_ ser칤a **lo m치s parecido al modelo de la aplicaci칩n**. Guarda los datos/estado de la aplicaci칩n y en Flux puede haber varias (Luego veremos que en algunas implementaciones s칩lo hay un 칰nico store).

No hay m칠todos en la _Store_ que permitan modificar los datos en ella, eso se hace a trav칠s de _dispatchers_ y acciones.

### Acciones

Un acci칩n es simplemente un **objeto JavaScript que indica una intenci칩n de realizar algo** y que lleva datos asociados si es necesario. Por ejemplo si tenemos una aplicaci칩n tipo _Carrito de la compra_, y a침adimos un item al carrito, la acci칩n que representar칤a esto ser칤a:

```javascript
{
    type: 'ADD_ITEM',
    item: item
}
```

### Dispatcher

Las acciones como la anterior son enviadas a un _dispatcher_ que se encarga de _dispararla_ o propagarla hasta la Store.

La vista es la que se encarga de enviar las acciones al _dispatcher_.

Un _dispatcher_ no es m치s que un **mediador entre la _Store_ o _Stores_ y las acciones**. Sirve para desacoplar la Store de la vista, ya que as칤 no es necesario conocer que Store maneja una acci칩n concreta.

En Resumen, el patr칩n FLUX sigue el siguiente recorrido:

- La vista, mediante un evento env칤a una acci칩n con la intenci칩n de realizar un cambio en el estado
- La acci칩n contiene el tipo y los datos (si los hubiere) y es enviada al dispatcher.
- El dispatcher propaga la acci칩n al Store y se procesa en orden de llegada.
- El Store recibe la acci칩n y dependiendo del tipo recibido, actualiza el estado y notifica a las vistas de ese cambio.
- La vista recibe la notificaci칩n y se actualiza con los cambios.

Todo en un 칰nico sentido.

## Implementaciones de Flux

Existen numerosas implementaciones de este patr칩n de desarrollo en JavaScript. Muchas de ellas ya no est치n mantenidas y poco a poco una de ellas se ha ido posicionando como referencia.

Posiblemente te suenen librer칤as como:

- Reflux
- McFly
- Marty.js
- Delorean
- Fluxxor
- Lux.js
- Fluxible
- Omniscent
- Redux
- ...

### Redux

Hoy por hoy la m치s utilizada y que pr치cticamente se ha convertido en un est치ndar es [Redux](http://redux.js.org), creada por [Dan Abramov](https://twitter.com/dan_abramov) (Actualmente dentro del equipo de React.js)

![Redux](/images/como-funciona-flux/logo_redux.png)

Es una librer칤a muy peque침a (apenas 2Kb de tama침o) con muy pocos m칠todos que implementa el patr칩n Flux con algunas modificaciones que la hacen m치s sencilla de manejar. Es agn칩stica al framework o librer칤a que utilices para tus desarrollos, ya que es 칰nicamente JavaScript por lo que puedes utilizarla junto a Angular, con Polymer y con React.

En pr칩ximos art칤culos hablar칠 m치s en detalle de Redux y sus caracter칤sticas.
