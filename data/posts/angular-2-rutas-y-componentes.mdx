---
title: "Angular 2: Rutas y Componentes"
date: "2015-11-11"
tags:
  - "游눹 Desarrollo"
---

Continuando con el tutorial pasado, donde vimos los [primeros pasos para trabajar con Angular 2](/angular-2-primeros-pasos/), en este art칤culo veremos c칩mo implementar rutas basadas en componentes.

Lo primero que necesitamos hacer es modificar el fichero `app.js` para a침adirle la configuraci칩n de rutas. Vamos a importar los m칩dulos correspondientes de `Angular2/Router`

```javascript
import {
  Router, RouteConfig, RouteParams,
  LocationStrategy, HashLocationStrategy,
  ROUTER_PROVIDERS, ROUTER_DIRECTIVES, ROUTER_PRIMARY_COMPONENT
} from 'angular2/router'; */
```

No necesitamos instalar una librer칤a adicional, el m칩dulo `router` va incluido en la librer칤a de `angular2`, pero si necesitamos importar las directivas y componentes que vamos a emplear:

- **RouteConfig** Es un decorador que utilizaremos de la misma forma que `@Component` o `@View` para ayudarnos a configurar las rutas.

- **ROUTE_PROVIDERS** son una serie de directivas que utilizaremos a la hora de lanzar el `bootstrap` de nuestra App.

- **ROUTE_DIRECTIVES**, funciona de la misma manera, Contiene directivas como `RouterLink` y `RouterOutlet`. Las emplearemos en el `template` a la hora de _pintar_ los links.

- **ROUTE \_PRIMARY \_COMPONENT** Se utiliza para enlazar el componente de alto orden encargado del enrutado.

- **LocationStrategy** y **HashLocationStrategy** funcionan de manera similar al `LocationProvider` de Angular 1.x

El componente que se encargar치 del enrutado ser치 el principal que creamos [en el art칤culo anterior](/angular-2-primeros-pasos/), el `<hello-app>`.

Para ello vamos a modificar la clase `HelloApp` cambi치ndole el `template` y a침adiendo la configuraci칩n de rutas:

```javascript
@Component({
  selector: 'hello-app'
})
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/']">Home</a></li>
      <li><a [router-link]="['/About']">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about, component: AboutComponent, as: 'About'}
])
class HelloApp {

}
```

쯈u칠 hemos hecho aqu칤?.

Hemos a침adido al decorador `@View` el atributo `directives` y le hemos incluido `ROUTER_DIRECTIVES`. De esta forma en el template podemos usar `Router-Link` para crear enlaces con Angular 2 y la directiva `router-outlet` cuyo funcionamiento es similar al que ten칤a `ng-view` o `ui-view` en Angular 1.x.

En ese elemento se insertar치n las vistas de la aplicaci칩n.

`@RouteConfig` por su parte, nos permite configurar las rutas en la nueva versi칩n de Angular.

A trav칠s de un array de objetos indicamos las rutas, con un `path` para indicar la URL, `component` para indicar el componente asociado a esa vista o URL, y `as` que viene a funcionar como el antiguo `ControllerAs` de Angular 1.x

Tambi칠n cambia la funci칩n `bootstrap`. En el ejemplo anterior tan s칩lo le indic치bamos la clase de arranque, pero ahora debemos pasarle las directivas que estamos utilizando:

```javascript
bootstrap(HelloApp, [
  ROUTER_PROVIDERS,
  provide(LocationStrategy, { useClass: HashLocationStrategy }),
  provide(ROUTER_PRIMARY_COMPONENT, { useValue: HelloApp }),
]);
```

Le inyectamos `ROUTE_PROVIDERS` para que funcione todo el sistema de rutas.

Le proveemos `LocationStrategy` para el tema del hash en las rutas.

Por 칰ltimo `ROUTER_PRIMARY_COMPONENT` para indicar cual es el componente principal que se encarga del enrutado.

El fichero `app.js` completo es este:

```javascript
import 'zone.js/lib/browser/zone-microtask';
import 'reflect-metadata';
import 'babel-core/polyfill';

import {
  Component, View,
  provide, bootstrap
} from 'angular2/angular2';

import {
  Router, RouteConfig,
  LocationStrategy, HashLocationStrategy,
  ROUTER_PROVIDERS, ROUTER_DIRECTIVES, ROUTER_PRIMARY_COMPONENT
} from 'angular2/router';

import { HelloComponent } from './hello.component';
import { AboutComponent } from './about.component';

@Component({
  selector: 'hello-app'
})
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/']">Home</a></li>
      <li><a [router-link]="['/About']">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about, component: AboutComponent, as: 'About'}
])
class HelloApp {

}

bootstrap(HelloApp, [
  ROUTER_PROVIDERS,
  provide(LocationStrategy, { useClass: HashLocationStrategy }),
  provide(ROUTER_PRIMARY_COMPONENT, { useValue: HelloApp })
]);
```

## Usando par치metros de ruta

Para la ruta principal empleamos el componente que ya vimos [en el pasado tutorial](/angular-2-primeros-pasos/), pero para la URL `/about` vamos a emplear uno nuevo que ser치 el fichero `about.component.js`:

Con este componente vamos a _jugar_ un poco m치s y para ello vamos a utilizar par치metros de ruta con `RouteParams`, para ello tendremos que modificar un poco `app.js`, pero antes vayamos con este componente:

```javascript
import { Component, View } from "angular2/angular2";
import { RouteParams } from "angular2/router";

@Component({
  selector: "about-component",
})
@View({
  template: "<p>{{ message }}</p>",
})
export class AboutComponent {
  constructor(routeParams: RouteParams) {
    this.message = `Hola, ${routeParams.get("nombre")}!`;
  }
}
```

쯈u칠 hemos hecho aqu칤?

Simplemente utilizamos la directiva `RouteParams` para obtener par치metros desde la URL que llama a este componente.

Ese par치metro lo llevar치 al mensaje que se _pinta_ en el HTML con `routeParams.get('nombre')` siendo `nombre` el par치metro que tenemos que definir en `app.js`, donde hemos configurado las rutas.

Volvemos a `app.js` y modificamos el `@RouteConfig` de 칠sta manera:

```javascript
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about/:nombre', component: AboutComponent, as: 'About'}
])
```

Y tambi칠n el `template` dentro de `@View` para que las rutas que contienen par치metros funcionen correctamente:

```javascript
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/Hello']">Home</a></li>
      <li><a [router-link]="['/About', {nombre: 'Carlos'}]">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
```

Le ponemos por defecto un valor de par치metro, en este caso `Carlos`

De esta manera, si vamos a la URL `http://localhost:8080` tendremos esto:

![Ejemplo 1](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-1.png)

Si pulsamos en el link `About` nos llevar치 a la URL `http://localhost:8080/about/carlos` y veremos esto:

![Ejemplo 2](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-2.png)

Y si por 칰ltimo cambiamos la URL por `http://localhost:8080/about/pepe` tendremos lo siguiente

![Ejemplo 3](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-3.png)
