---
slug: "/como-pasar-variables-como-atributos-en-directivas-de-angularjs"
title: "C칩mo pasar variables como atributos en directivas de AngularJS"
date: "2015-06-15"
tags:
    - "游눹 Desarrollo"
---
Las directivas de Angular sirven para encapsular c칩digo HTML de manera que nuestras aplicaciones puedan tener elementos reutilizables, tambi칠n conocidos como componentes.

Cuando Angular apareci칩 fue algo muy novedoso, aunque hoy en d칤a podemos utilizar los *Web Components* y la librer칤a *Polymer* para tener algo parecido y de forma nativa de HTML5.

Una de las cosas que suele ser algo complicada de implementar es cuando en nuestra directiva colocamos un atributo y queremos que ese atributo se utilice en el HTML *interior* de la directiva, y adem치s que ese atributo que pasamos sea una variable din치mica que cambiar치 seg칰n la vista o estado en el que nos encontremos.

En este art칤culo vamos a ver como hacerlo con un peque침o ejemplo.

Imaginemos que queremos implementar una directiva que sea una caja de b칰squeda. Y lo queremos programar como directiva porque lo vamos a usar en m치s partes de nuestra aplicaci칩n y ese es su objetivo, que las directivas sean reutilizables. Queremos que sea algo as칤:

```html
<search-bar busqueda=""></search-bar>
```

Esta directiva tendr치 el siguiente c칩digo HTML por debajo:

```html
<div class="form-group">
  <input type="text"
         class="form-control"
         placeholder="Introduce tu texto a buscar"
         value="" />
</div>
```

쮺칩mo hacemos para pasar el contenido del atributo `busqueda` al atributo `value` del `input` dentro de nuestra directiva? Veamos el c칩digo *JavaScript* de la directiva, suponiendo que pertenezca a un m칩dulo `myApp`.

```javascript
(function () {
  'use strict'

  angular
    .module('myApp')
    .directive('searchBar', searchBar);

  function searchBar () {
    return {
      restrict: 'E',
      scope: {
        busqueda: '@'
      },
      template: '<div class="form-group">'
                + '<input type="text" '
                +        'class="form-control"'
                +        'placeholder="Introduce tu texto a buscar"'
                +        'value={{busqueda}}'
                +'</div>'
    }
  }

})();
```

Veamos que hemos hecho aqu칤. Hemos pasado el contenido de la directiva como un *string* al atributo `template`. Si el HTML es muy grande, podemos tenerlo separado en un archivo HTML y pasarle la ruta de ese archivo en el atributo `templateUrl`

En la plantilla hemos indicado que el `value` del `input` sea `value={{busqueda}}`. Es decir, le pasamos como variable el contenido del atributo `busqueda` de la directiva.

Para poder hacer esto, y tambien, si el contenido que pasamos no es fijo, si no que viene de una variable, tipo:

```html
<search-bar busqueda={{textoBusqueda}}></search-bar>
```

necesitamos indicarle a la directiva que tiene un *scope* propio y cuales son los atributos de ese *scope*:

```javascript
scope: {
  busqueda: '@'
}
```
Indic치ndole `@` le estamos diciendo de manera unidireccional que el valor del atributo `busqueda` se copie e la propiedad `{{busqueda}}` del *scope* de la directiva.

Usar `@` tiene un problema, al ser unidireccional, si queremos cambiar el valor de la propiedad `busqueda` del *scope* de la directiva, no se cambia la propiedad en el controlador que estemos utilizando, y nos obloga a usar siempre la doble llave `{{ }}` si queremos enlazar la propiedad al controlador.

Para solucionar esto, podemos usar el caracter `=` que indica que la propiedad `busqueda` del *scope* de la directiva sea exactamente la propiedad del *scope* del controlador que estemos utilizando y tenga un atributo b칰squeda.

Con estos cambios quedar칤a as칤 la definici칩n:

```javascript
(function () {
  'use strict'

  angular
    .module('myApp')
    .directive('searchBar', searchBar);

  function searchBar () {
    return {
      restrict: 'E',
      scope: {
        busqueda: '='
      },
      template: '<div class="form-group">'
                + '<input type="text" '
                +        'class="form-control"'
                +        'placeholder="Introduce tu texto a buscar"'
                +        'value={{busqueda}}'
                +'</div>'
    }
  }

})();
```

y podr칤amos usar la directiva as칤:

```html
<search-bar busqueda=textoBusqueda></search-bar>
```
Siendo `textoBusqueda` una propiedad del *scope* donde se llama a la directiva.

