---
title: "Ejemplo de aplicaci칩n con React.js en ECMAScript 6"
tags:
  - "游눹 Desarrollo"
date: "2015-06-23"
---

Hoy vamos a ver un peque침o ejemplo de aplicaci칩n web empleando [React.js](/empezando-con-react-js-y-ecmascript-6/) para crear componentes reutilizables y aprovecharemos para usar [ECMAScript 6](/ecmascript6/), el nuevo est치ndar de JavaScript, que traduciremos al est치ndar que todav칤a entienden los navegadores actuales con [Browserify](/browserify-desarrollando-tu-frontend-como-en-node-js/) y Babel (Babelify).

Vamos a ser una aplicaci칩n muy sencilla, sin mucha interacci칩n, simplemente representaremos datos, m치s adelante veremos cosas m치s completas.

Esto ser치 lo que vamos a hacer. He delimitado con recuadros lo que yo considerar칤a como un componente, y por tanto un elemento de React.

![Aplicaci칩n desglosada en componentes](/images/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/react-components.jpg)

Tendremos un `EmpleadoAvatar` (recuadro rojo), un `EmpleadoRow` (recuadro verde) y por 칰ltimo un `EmpleadoList` (recuadro azul).

La estructura de directorios y ficheros que voy a utilizar ser치 la siguiente:

```shell
- src/
	- index.jsx
    - components/
    	- empleado-avatar/
        	- index.jsx
            - index.styl
        - empleado-row/
        	- index.jsx
            - index.styl
        - empleado-list
        	- index.jsx
            - index.styl
- node_modules
- build
	- index.html
    - js/
    	- bundle.js
- gulpfile.js
```

En la carpeta `components` tengo 3 componentes, el correspondiente al avatar del empleado, a la fila que contiene la informaci칩n y al listado completo. Cada uno de ellos es una carpeta con su c칩digo JavaScript (`index.jsx`) y sus estilos, en el caso de que tuvieramos que definirlos. En este ejemplo utilizo `stylus`. `index.jsx` debajo de la carpeta `src` ser치 el fichero de entrada de nuestra aplicaci칩n, el _main_.

En `node_modules` estar치n nuestras dependencias tanto para desarrollo como finales. Para emplear React necesitamos instalar su librer칤a, lo haremos por `npm`

```shell
$ npm install --save react
```

Despues ya podemos implementar nuestros componentes. Empezamos por `EmpleadoAvatar`. Veamos su c칩digo en `empleado-avatar/index.jsx`

```javascript
import React from "react";

class EmpleadoAvatar extends React.Component {
  render() {
    return (
      <figure className="media-left">
        <img
          className="media-object"
          width="64px"
          src={`http://taller-angular.carlosazaustre.es/asset/${this.props.picture}`}
        />
      </figure>
    );
  }
}

export default EmpleadoAvatar;
```

Creamos un componente que hereda de React.Component y va devolver una vista con un `figure` y un `img`, sus atributos o `props` van a ser 칰nicamente la URL de la imagen que contiene la foto del empleado. Exportamos el m칩dulo como `EmpleadoAvatar` para poder utilizarlo en otra parte de nuestra aplicaci칩n, como por ejemplo en el `EmpleadoRow`.

Voy a emplear Bootstrap para los estilos. Si tuviesemos estilos espec칤ficos de cada componente, podr칤an ir en su carpeta junto con el `index.jsx` y posteriormente con una tarea de Gulp, los preprocesar칤amos y tendr칤amos un 칰nico fichero `.css` para producci칩n.

Ahora pasemos a ver el c칩digo del siguiente componente, `empleado-row/index.jsx`:

```javascript
import React from "react";
import EmpleadoAvatar from "../empleado-avatar";

class EmpleadoRow extends React.Component {
  render() {
    return (
      <li className="media">
        <EmpleadoAvatar picture={this.props.picture} />
        <div className="media-body">
          <h4>{this.props.name}</h4>
          <p>
            {this.props.title} &nbsp;
            <span className="label label-info">{this.props.department}</span>
          </p>
        </div>
      </li>
    );
  }
}

export default EmpleadoRow;
```

Importamos de nuevo la librer칤a `React` y el componente que hemos creado en el paso anterior `EmpleadoAvatar`. En `EmpleadoAvatar` definimos un `props` que era la imagen, con `picture`. Pues bien, ahora en este nuevo componente, como utilizaos el anterior vemos que le pasamos el atributo de la siguiente manera:

```jsx
<EmpleadoAvatar picture={this.props.picture} />
```

Porque `picture` es una `prop` de `EmpleadoAvatar` y lo que le pasamos en una `prop` del componente que estamos creando, por eso le pasamos `this.props.picture`.

El siguiente componente ser칤a el listado de emplados, veamos su c칩digo `empleado-list/index.jsx`

```javascript
import React from "react";
import EmpleadoRow from "../empleado-row";

class EmpleadoList extends React.Component {
  render() {
    return (
      <ul className="media-list">
        {this.props.listado.map((empleado) => {
          return (
            <EmpleadoRow
              key={empleado.id}
              name={empleado.fullName}
              picture={empleado.pic}
              title={empleado.title}
              department={empleado.department}
            />
          );
        })}
      </ul>
    );
  }
}

export default EmpleadoList;
```

Aqu칤 utilizamos el componente `EmpleadoRow` junto con sus `props`: `name, picture, title` y `department` dentro del nuevo componente `EmpleadoList` el cual tiene un nuevo `prop` llamado `listado` que recibir치 un array de objetos con la informaci칩n de los empleados.

A este array le aplicamos la funci칩n `map` de JavaScript para que recorra cada elemento del array y devuelva un componente `EmpleadoRow` con sus propiedades. Exportamos el componente y seguimos.

Ahora veamos el c칩digo de `index.jsx` que es el fichero principal de la aplicaci칩n y el que va a renderizar la vista.

```javascript
import React from "react";
import EmpleadoList from "./components/empleado-list";

let empleados = [
  {
    id: 1,
    fullName: "Laya Due침as",
    title: "CEO",
    department: "Business",
    pic: "empleado01.png",
  },
  {
    id: 2,
    fullName: "Astryd Vall칠s",
    title: "CMO",
    department: "Marketing",
    pic: "empleado02.png",
  },
  {
    id: 3,
    fullName: "Shantell Meza",
    title: "CFO",
    department: "Business",
    pic: "empleado03.png",
  },
  {
    id: 4,
    fullName: "Sergio Ocampo",
    title: "CTO",
    department: "Engineering",
    pic: "empleado04.png",
  },
  {
    id: 5,
    fullName: "Ares Jim칠nez",
    title: "Art Director",
    department: "Marketing",
    pic: "empleado05.png",
  },
  {
    id: 6,
    fullName: "Marta P칠rez",
    title: "Frontend Dev",
    department: "Engineering",
    pic: "empleado06.png",
  },
  {
    id: 7,
    fullName: "Ellen Balderas",
    title: "Digital Strategist",
    department: "Marketing",
    pic: "empleado07.png",
  },
  {
    id: 8,
    fullName: "Cynthia Valent칤n",
    title: "Backend Dev",
    department: "Engineering",
    pic: "empleado08.png",
  },
  {
    id: 9,
    fullName: "Bernard Jung",
    title: "DevOps Engineer",
    department: "Engineering",
    pic: "empleado09.png",
  },
];

React.render(
  <EmpleadoList listado={empleados} />,
  document.getElementById("application")
);
```

En este fichero tenemos un array de objectos _Empleado_. Importamos el componente `EmpleadoList` y le pasamos a su `prop`, `listado`, el array `empleados` en el m칠todo `render()` de React. tambi칠n le pasamos el elemento HTML donde queremos insertar la vista. En este caso usaremos el `div` con id `#application`.

Es el momento de crear el `index.html` principal de la aplicaci칩n. Lo hacemos en la carpeta `build` donde tendremos los archivos de _producci칩n_.

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>React Example</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.css"
    />
  </head>

  <body>
    <h1>Listado de Empleados</h1>
    <div id="application"></div>

    <script src="/js/bundle.js"></script>
  </body>
</html>
```

El fichero `js/bundle.js` es el que vamos a generar ahora gracias a Browserify y Babelify en una tarea de gulp. Primero instalamos las dependencias que utilizaremos:

```shell
$ npm install --save-dev gulp
$ npm install --save-dev gulp-webserver
$ npm install --save-dev gulp-stylus
$ npm install --save-dev browserify
$ npm install --save-dev babelify
$ npm install --save-dev vinyl-source-stream
$ npm install --save-dev gulp-minify-css
$ npm install --save-dev nib
```

Y este ser칤a nuestro `gulpfile.js`

```javascript
var gulp = require("gulp");
var webserver = require("gulp-webserver");
var stylus = require("gulp-stylus");
var browserify = require("browserify");
var babelify = require("babelify");
var source = require("vinyl-source-stream");
var nib = require("nib");
var minify = require("gulp-minify-css");

gulp.task("server", function () {
  gulp.src("./build").pipe(
    webserver({
      host: "0.0.0.0",
      port: 8080,
      fallback: "index.html",
      livereload: true,
    })
  );
});

gulp.task("stylus", function () {
  gulp
    .src("./src/styles/style.styl")
    .pipe(
      stylus({
        use: nib(),
        "include css": true,
      })
    )
    .pipe(minify())
    .pipe(gulp.dest("./build/css/"));
});

gulp.task("build", function () {
  browserify({
    entries: "./src/index.jsx",
    extensions: [".jsx"],
    debug: true,
  })
    .transform(babelify)
    .bundle()
    .pipe(source("bundle.js"))
    .pipe(gulp.dest("./build/js"));
});

gulp.task("watch", function () {
  gulp.watch("./src/**/*.jsx", ["build"]);
  gulp.watch(
    ["./src/styles/**/*.styl", "./src/components/**/*.styl"],
    ["stylus"]
  );
});

gulp.task("default", ["server", "watch"]);
```

He a침adido tambi칠n tareas de preprocesado CSS en Stylus, por si tenemos estilos particulares para cada componente. Pero en este ejemplo estoy usando tan solo Bootstrap.

Para ejecutar y probar la aplicaci칩n debemos escribir en el terminal:

```shell
$ gulp build
$ gulp
```

Y en `http://localhost:8080` tendremos nuestra app corriendo.
