---
title: "C√≥mo configurar un servidor web con Amazon Web Services"
date: "2013-07-23"
tags:
  - "üíª Desarrollo"
---

A veces necesitamos de un servidor web para _testing_ y no nos sirve con nuestro entorno de desarrollo local porque necesitamos ense√±arle a alguien lo que estamos haciendo y por tanto es necesario que est√© subido en alg√∫n sitio.

La forma antigua de hacer esto era tener un hosting web y subir los archivos por FTP al host y y con la URL del dominio que hab√≠amos comprado ya ten√≠amos un entorno que poder ense√±ar. Esto, hoy en d√≠a, se considera un poco ‚Äúcutre‚Äù, pudiendo hacer uso de las tecnolog√≠as Cloud de las que disponemos. A continuaci√≥n cuento como registrarse en Amazon Web Services y montar un servidor LAMP en una instancia.

La que m√°s recomiendo para ‚Äútrastear‚Äù es abrirse una cuenta en [Amazon Web Services (AWS)](http://aws.amazon.com/) y lanzar una instancia [Elastic Compute Cloud (EC2)](http://aws.amazon.com/ec2/) que b√°sicamente consiste en una m√°quina virtual Linux con al que podemos hacer lo que queramos, y lo m√°s importante, **Amazon te da 1 a√±o gratis para usarlo**, despu√©s del a√±o te cobrar√° por horas de uso y almacenamiento, pero la instancia puedes pararla y terminarla cuando desees. En caso de que quieras dejarla siempre corriendo, puedes llegar a pagar unos 16‚Ç¨ al mes.

![](/images/como-crear-un-servidor-web-con-amazon-web-services/amazon_com_web_services_qepgql.jpg)

El primer paso como digo es hacerse una cuenta en Amazon Web Services, si tienes cuenta en la tienda de Amazon te sirve la misma. Para ello vamos a [aws.amazon.com](http://aws.amazon.com) y pulsamos en **Get Started for free¬†- Launch virtual machines and apps in minutes**

Nos pedir√° nuestros datos para registrarnos, as√≠ como una tarjeta de cr√©dito/d√©bito para en caso de que hagamos uso de alg√∫n servicio no gratuito o para cuando finalice nuestro periodo de prueba. Durante el primer a√±o de uso, **si no tenemos m√°s que una instancia EC2 `t1.micro`, Amazon no nos cobrar√° nada**.

Para verificar que la cuenta es tuya tendremos que verificar nuestra identidad por tel√©fono, pero no hay nada que temer, simplemente nos llamar√° una grabaci√≥n a la que debemos decir la clave que la web nos proporciona, incluso podemos darle los n√∫meros pulsando el teclado del tel√©fono.

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_30_l14vfb.png)

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_42_b82pcm.png)

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_52_lhkoua-1.png)

Una vez verificada la cuenta, te llegar√° un email de que la activaci√≥n est√° completa y ya podr√°s acceder al dashboard de AWS.

![AWS Dashboard](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_55_07_hdmpd1.png)

Ah√≠ vamos a EC2 y en el panel de control damos a lanzar nueva instancia. Lanzamos el _Quick Launch Wizard_, elegimos crear un _New Key Pair_ y como maquina virtual elegiremos **Ubuntu Server 12.04.2 LTS** que es gratuita para el `t1.micro`. Nos descargamos el fichero `.pem` con la clave privada que hemos generado para poder acceder a la m√°quina virtual y damos a siguiente.

![Elige una m√É¬°quina virtual en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_59_34_x0w3vu.png)

Una vez realizados los pasos anteriores ya tendremos nuestra instancia corriendo como vemos en el dashboard

![Instancia EC2 en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_04_38_pdjo8h.png)

Ahora para poder acceder via terminal a nuestra m√°quina virtual tenemos la clave privada `.pem` que hemos descargado y una URL del tipo¬†`ec2-50-19-140-229.compute-1.amazonaws.com` que apunta a la IP de nuestra instancia. Para poder acceder v√≠a SSH de una manera m√°s comoda haremos lo siguiente.

```shell
# Copiamos el fichero .pem a nuestro
# directorio ~/.ssh y le damos permisos
# de s√≥lo lectura por nosotros

$ mkdir ~/.ssh
$ copy ~/Downloads/miclave.pem ~/.ssh
$ sudo chmod 400 miclave.pem

# creamos un fichero config dentro de .ssh
# con los siguientes datos

$ sudo nano .ssh/config
Host awshost1
Hostname¬†ec2-50-19-140-229.compute-1.amazonaws.com (inserta el tuyo)
User ubuntu
IdentityFile "~/.ssh/miclave.pem"
```

De esta manera siempre que queramos acceder a nuestra m√°quina v√≠a SSH s√≥lo tenemos que escribir en el terminal

```shell
$ ssh awshost1
```

Ya estamos dentro de la instacia Linux de AWS, para tenerla actualizada es una buena opci√≥n hacer lo siguiente

```shell
$ sudo apt-get update
$ sudo apt-get upgrade
```

Y para poder instalar un entorno LAMP, ejecutamos lo siguiente:

```shell
$ sudo apt-get install tasksel
```

Esto nos abrir√° un men√∫ de opciones donde podremos elegir instalar un LAMP (Linux-Apache-MySQL-PHP) server en pocos minutos.

![Tasksel para instalar LAMP en Linux](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_19_22_jhte9m.png)

Una vez finalice la instalaci√≥n, tu servidor web est√°tico estar√° ubicado en el directorio `/var/www/`.

Y si vamos a nuestro navegador y ponemos como URL la que nos proporciona la instancia de AWS, del tipo `ec2-50-19-140-229.compute-1.amazonaws.com` podremos ver el siguiente mensaje:

![Apache Web Server](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_22_30_yfatt2.png)

Eso significa que hemos creado una m√°quina virtual de Linux en una instancia EC2 de AWS, hemos instalado un servidor LAMP y ya podemos servir ficheros est√°ticos y aplicaciones web basadas en PHP en √©l.

Y para ser m√°s cool todav√≠a, **olv√≠date de FTPs** eso es de la √©poca en la que las webs estaban llenas de GIFs, lucecitas y Flash. **Inst√°late Git en tu m√°quina y haz pull de tu repositorio en GitHub**, Bitbucket o donde lo tengas. Si haces eso, Dios matar√° menos gatitos.

**Fuente**: [Startup Engineering ‚Äì Coursera](https://class.coursera.org/startup-001)
