---
title: "ES6 Tagged Template Literals"
date: "2018-09-01"
tags:
  - "üíª Desarrollo"
---

[ECMAScript v6, la nueva versi√≥n del est√°ndar de JavaScript](/ecmascript6), ha tra√≠do muchas novedades y hay una de ellas que ha pasado desapercibida y me parece muy interesante.

Son las _ES6 Tagged Template Literals_.

Pero antes veamos un poco de introducci√≥n.

## Template Strings

Como sabr√°s si has estado pendiente de las novedades que trae ES6, con esta nueva versi√≥n tenemos una nueva forma de escribir _strings_ en JavaScript. A mi parecer m√°s c√≥moda y legible que c√≥mo se hac√≠a antes.

Por ejemplo, si antes quer√≠amos imprimir un _string_ con varias variables, ten√≠amos que hacer esto:

```javascript
console.log(
  "Hola, me llamo " +
    nombre +
    ", tengo " +
    edad +
    " a√±os y soy de " +
    pais +
    "."
);
```

Con ES6 utilizando **template strings** podemos escibir lo mismo de una forma m√°s c√≥moda utilizando las comillas invertidas y el s√≠mbolo del d√≥lar `$` seguido de las llaves `{}` sin necesidad de usar el operador `+` para concatenar los _strings_.

```javascript
console.log(`Hola me llamo ${nombre}, tengo ${edad} a√±os y soy de ${pais}`);
```

Tambi√©n es muy √∫til a la hora de imprimir _strings_ multil√≠nea que antes resultaban muy engorrosos. Pod√≠amos hacer as√≠:

```javascript
console.log("Esto es una l√≠nea\nEsto es otra l√≠nea\n y esto es la 3a l√≠nea");
```

o as√≠, para poderlo leer "mejor":

```javascript
console.log(
  "Esto es una l√≠nea\n" + "Esto es otra l√≠nea\n" + "y esto es la 3a l√≠nea"
);
```

El operador de la comilla invertida que utilizamos en los _template strings_ nos permite a√±adir espacios y saltos de l√≠nea sin usar operadores especiales ni el `+` para concatenarlos.

```javascript
console.log(`Esto es una l√≠nea
     Esto es otra l√≠nea
     y esto es la 3a l√≠nea`);
```

Bien, pues sabiendo esto, te presento los ES6 Tagged Template Literals.

## Tagged Templates

¬øY esto qu√© es? Pues no son m√°s que funciones como cualquier otra, pero que son diferentes la forma en la que se las llama.

Imagina que tienes √©sta funci√≥n:

```javascript
function miTaggedTemplateLiteral(strings) {
  return console.log(strings);
}
```

La podr√≠amos llamar directamente pas√°ndole el _string_ con las comillas invertidas, sin necesidad de utilizar los par√©ntesis `()` y nos devolver√≠a un array con los strings pasados como par√°metro:

```javascript
miTaggedTemplateLiteral`Hola`;
// ['Hola']
miTaggedTemplateLiteral`Hola k ase`;
// ['Hola k ase'];
```

Si le pasamos variables, se vuelve m√°s interesante, porque estas variables la funci√≥n es capaz de separarlas, colocando en un array los _strings_ y las variables por separado

```javascript
function miTaggedTemplateLiteral(strings, value, value2) {
  return console.log(strings, value, value2);
}

let nombre = "Carlos";
let edad = 32;
miTaggedTemplateLiteral`Hola soy ${nombre} y tengo ${edad} a√±os`;

// ["Hola soy ", " y tengo ", " a√±os"]
// "Carlos"
// 32
```

Si no sabes cuantos variables vas a utilizar puedes utilizar _rest parameters_ y la funci√≥n quedar√≠a as√≠ y funcionar√≠a igual:

```javascript
function miTaggedTemplateLiteral(strings, ...values) {
  return console.log(strings, ...values);
}
```

## Utilidad

¬øY esto para que puede serme √∫til? Pues es una buena forma de utilizar JavaScript y la potencia de ES6 para construir templates. Veamos como:

Si juntamos la funcionalidad de los _template strings_ de poder escribir en varias l√≠neas, el operador _rest_ y con la posibilidad de utilizar este tipo de funciones, podemos crear una funci√≥n que manipule estos datos y llamarla de esta manera:

```javascript
const data = {
  nombre: "Google Pixel L",
  imagen: "http://example.com/miImagen.png",
  precio: 699,
};

const miProducto = generaTemplate`<article>
  <h1>${nombre}</h1>
  <img src="${imagen}" />
  <span>${precio} ‚Ç¨ </span>
</article>`(data);

console.log(miProducto);
/* "<article>
  <h1>Google Pixel L</h1>
  <img src=http://example.com/miImagen.png />
  <span>699 ‚Ç¨ </span>
</article>"
*/
```

Y la funci√≥n `generaTemplate` ser√≠a algo como esto:

```javascript
function generaTemplate(strings, ...keys) {
  return function (data) {
    let temp = strings.slice();
    keys.forEach((key, i) => {
      temp[i] = temp[i] + data[key];
    });
    return temp.join("");
  };
}
```

Puedes ver esto en funcionamiento en el siguiente [JSBin](http://jsbin.com/mutedicali/1/edit?js,console)

Esta misma funcionalidad y mucho mejor implementada es lo que hace la [librer√≠a `html` de JavaScript](https://www.npmjs.com/package/html) creada por [Max Ogden](https://github.com/maxogden) tambi√©n creador de librer√≠as como [yo-yo](https://github.com/maxogden/yo-yo) similar a React pero mucho m√°s sencilla que en lugar de utilizar JSX utiliza √©sta funcionalidad que hemos visto de las _Tagged Template Literals_ y tambi√©n es utilizada en un peque√±o framework web muy interesante llamado [Choo](https://github.com/yoshuawuyts/choo) creado por [Yoshua Wuyts](https://github.com/yoshuawuyts) que si tengo tiempo me gustar√≠a probar y hablar de el en pr√≥ximos posts.

## Recursos

A continuaci√≥n te comparto una serie de links d√≥nde puedes profundizar sobre √©ste tema:

- [Exploring ES6: Tagged Templates](http://exploringjs.com/es6/ch_template-literals.html#sec_tagged-templates-examples)
- [2ality: Computing tag functions for ES6 template literals](http://www.2ality.com/2016/11/computing-tag-functions.html)
- [MDN: Template Literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)
